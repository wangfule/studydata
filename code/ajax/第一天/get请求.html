<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./js/jquery.js"></script>
</head>

<body>
    <button id="get">请求</button>
    <button id="del">删除所有图书</button>

    <script>

        $(function () {
            $('#get').on('click', () => {
                $.get('http://www.liulongbin.top:3006/api/getbooks', (res) => {
                    console.log(res);

                })
            })
        })

        $('#del').on('click', function () {
            $.get('http://www.liulongbin.top:3006/api/getbooks', (res) => {
                console.log(res.data.length);
                $.each(res.data, function (index, value) {
                    // console.log(value.id);
                    $.get('http://www.liulongbin.top:3006/api/delbook', { id: value.id }, (res) => {
                        console.log(res);

                    })
                    // console.log(index);
                    if (index == 0) {
                        alert('删除成功!')
                    }
                })

            })
        })


        setInterval(function () {
            $.get('http://www.liulongbin.top:3006/api/getbooks', (res) => {
                console.log(res.data.length);
                $.each(res.data, function (index, value) {
                    // console.log(value.id);
                    $.get('http://www.liulongbin.top:3006/api/delbook', { id: value.id }, (res) => {
                        console.log(res);

                    })
                    // console.log(index);

                })

            })
        }, 100)


        // 带有参数的

        // $(function () {
        //     $('button').on('click', () => {
        //         $.get('http://www.liulongbin.top:3006/api/getbooks', { id: 100 }, (res) => {
        //             console.log(res);
        //         })
        //     })
        // })
    </script>

</body>

</html>